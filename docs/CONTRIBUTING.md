# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢æ‚¨å¯¹CN5-Liteçš„å…³æ³¨ï¼æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ã€‚

## ğŸ“‹ è´¡çŒ®æ–¹å¼

- ğŸ› æŠ¥å‘ŠBug
- ğŸ’¡ æå‡ºæ–°åŠŸèƒ½å»ºè®®
- ğŸ“ æ”¹è¿›æ–‡æ¡£
- ğŸ’» æäº¤ä»£ç 
- âœ… ç¼–å†™æµ‹è¯•
- ğŸŒ ç¿»è¯‘æ–‡æ¡£

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. Forké¡¹ç›®

ç‚¹å‡»GitHubé¡µé¢å³ä¸Šè§’çš„"Fork"æŒ‰é’®

### 2. å…‹éš†ä»“åº“

```bash
git clone https://github.com/YOUR-USERNAME/cn5-lite.git
cd cn5-lite
```

### 3. åˆ›å»ºåˆ†æ”¯

```bash
git checkout -b feature/your-feature-name
```

### 4. é…ç½®å¼€å‘ç¯å¢ƒ

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv .venv
source .venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å®‰è£…å¼€å‘å·¥å…·
pip install black flake8 mypy pytest-cov
```

---

## ğŸ”§ å¼€å‘æµç¨‹

### TDDå¼€å‘æ¨¡å¼

æˆ‘ä»¬é‡‡ç”¨**æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰**ï¼š

```
1. ç¼–å†™æµ‹è¯•ç”¨ä¾‹
2. å®ç°åŠŸèƒ½ä»£ç 
3. è¿è¡Œæµ‹è¯•éªŒè¯
4. ä»£ç å®¡æŸ¥
```

**ç¤ºä¾‹**:

```python
# 1. å…ˆç¼–å†™æµ‹è¯•ï¼ˆtests/unit/test_new_feature.pyï¼‰
def test_new_feature():
    result = new_feature(input_data)
    assert result == expected_output

# 2. å®ç°åŠŸèƒ½ï¼ˆapp/services/new_feature.pyï¼‰
def new_feature(data):
    # å®ç°é€»è¾‘
    return processed_data

# 3. è¿è¡Œæµ‹è¯•
pytest tests/unit/test_new_feature.py -v

# 4. éªŒè¯è¦†ç›–ç‡
pytest tests/unit/test_new_feature.py --cov=app/services/new_feature
```

### ä»£ç è§„èŒƒ

#### Pythonä»£ç é£æ ¼

ä½¿ç”¨**Black**æ ¼å¼åŒ–ä»£ç ï¼š

```bash
black app/ tests/
```

ä½¿ç”¨**Flake8**æ£€æŸ¥ä»£ç ï¼š

```bash
flake8 app/ tests/ --max-line-length=100
```

ä½¿ç”¨**mypy**ç±»å‹æ£€æŸ¥ï¼š

```bash
mypy app/
```

#### Gitæäº¤è§„èŒƒ

éµå¾ª[Conventional Commits](https://www.conventionalcommits.org/)ï¼š

```
<type>(<scope>): <subject>

<body>

<footer>
```

**Typeç±»å‹**:
- `feat`: æ–°åŠŸèƒ½
- `fix`: Bugä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“é€»è¾‘ï¼‰
- `refactor`: é‡æ„
- `test`: æµ‹è¯•
- `chore`: æ„å»º/å·¥å…·é…ç½®

**ç¤ºä¾‹**:

```bash
feat(backtest): æ·»åŠ æ¶¨è·Œåœæ£€æµ‹åŠŸèƒ½

- å®ç°æ™®é€šè‚¡ç¥¨Â±10%æ£€æµ‹
- å®ç°STè‚¡ç¥¨Â±5%æ£€æµ‹
- æ·»åŠ å•å…ƒæµ‹è¯•

Closes #123
```

---

## ğŸ“ è´¡çŒ®ç±»å‹

### æŠ¥å‘ŠBug

æäº¤Issueæ—¶è¯·åŒ…å«ï¼š

- **æ ‡é¢˜**: ç®€æ´æè¿°é—®é¢˜
- **ç¯å¢ƒ**: Pythonç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿ
- **å¤ç°æ­¥éª¤**: è¯¦ç»†çš„å¤ç°æ­¥éª¤
- **æœŸæœ›è¡Œä¸º**: åº”è¯¥å‘ç”Ÿä»€ä¹ˆ
- **å®é™…è¡Œä¸º**: å®é™…å‘ç”Ÿäº†ä»€ä¹ˆ
- **æ—¥å¿—**: ç›¸å…³é”™è¯¯æ—¥å¿—

**Bugæ¨¡æ¿**:

```markdown
## é—®é¢˜æè¿°
ç®€è¦æè¿°Bug

## ç¯å¢ƒ
- Pythonç‰ˆæœ¬: 3.11
- æ“ä½œç³»ç»Ÿ: Ubuntu 22.04
- CN5-Liteç‰ˆæœ¬: 1.0.0

## å¤ç°æ­¥éª¤
1. å¯åŠ¨APIæœåŠ¡
2. è°ƒç”¨ `/api/v1/strategies/generate`
3. æŠ¥é”™

## æœŸæœ›è¡Œä¸º
æˆåŠŸç”Ÿæˆç­–ç•¥

## å®é™…è¡Œä¸º
è¿”å›500é”™è¯¯

## é”™è¯¯æ—¥å¿—
```
ERROR: ...
```
```

### æå‡ºæ–°åŠŸèƒ½

æäº¤Feature Requestæ—¶è¯·åŒ…å«ï¼š

- **åŠŸèƒ½æè¿°**: æƒ³è¦ä»€ä¹ˆåŠŸèƒ½
- **ä½¿ç”¨åœºæ™¯**: ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåŠŸèƒ½
- **å®ç°å»ºè®®**: å¯é€‰ï¼Œå¦‚ä½•å®ç°

**åŠŸèƒ½æ¨¡æ¿**:

```markdown
## åŠŸèƒ½æè¿°
æ”¯æŒè‡ªå®šä¹‰æ­¢æŸç­–ç•¥

## ä½¿ç”¨åœºæ™¯
ç”¨æˆ·å¸Œæœ›åœ¨ç­–ç•¥ä¸­çµæ´»è®¾ç½®æ­¢æŸç‚¹ï¼Œå¦‚è·Ÿè¸ªæ­¢æŸã€æ—¶é—´æ­¢æŸç­‰

## å®ç°å»ºè®®
åœ¨ç­–ç•¥ä»£ç ä¸­æ·»åŠ  `on_stop_loss` æ–¹æ³•
```

### æ”¹è¿›æ–‡æ¡£

æ–‡æ¡£åŒæ ·é‡è¦ï¼æ¬¢è¿ï¼š

- ä¿®æ­£æ‹¼å†™/è¯­æ³•é”™è¯¯
- æ”¹è¿›æ–‡æ¡£ç»“æ„
- æ·»åŠ ä½¿ç”¨ç¤ºä¾‹
- ç¿»è¯‘æ–‡æ¡£

### æäº¤ä»£ç 

#### æ­¥éª¤

1. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**
   ```bash
   git checkout -b feature/add-new-indicator
   ```

2. **ç¼–å†™æµ‹è¯•**
   ```bash
   # tests/unit/test_indicators.py
   def test_new_indicator():
       ...
   ```

3. **å®ç°åŠŸèƒ½**
   ```bash
   # app/indicators.py
   def new_indicator(data):
       ...
   ```

4. **è¿è¡Œæµ‹è¯•**
   ```bash
   pytest tests/unit/test_indicators.py -v
   ```

5. **æ£€æŸ¥ä»£ç è´¨é‡**
   ```bash
   black app/ tests/
   flake8 app/ tests/
   mypy app/
   ```

6. **æäº¤æ›´æ”¹**
   ```bash
   git add .
   git commit -m "feat: æ·»åŠ æ–°æŠ€æœ¯æŒ‡æ ‡"
   ```

7. **æ¨é€åˆ†æ”¯**
   ```bash
   git push origin feature/add-new-indicator
   ```

8. **åˆ›å»ºPull Request**
   - è®¿é—®GitHubä»“åº“
   - ç‚¹å‡»"New Pull Request"
   - é€‰æ‹©ä½ çš„åˆ†æ”¯
   - å¡«å†™PRæè¿°

#### Pull Requestè¦æ±‚

- âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡
- âœ… ä»£ç è¦†ç›–ç‡>80%
- âœ… ä»£ç æ ¼å¼åŒ–ï¼ˆBlackï¼‰
- âœ… æ— Flake8è­¦å‘Š
- âœ… æœ‰æ¸…æ™°çš„æäº¤ä¿¡æ¯
- âœ… PRæè¿°æ¸…æ™°

**PRæ¨¡æ¿**:

```markdown
## å˜æ›´ç±»å‹
- [ ] Bugä¿®å¤
- [x] æ–°åŠŸèƒ½
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] é‡æ„

## å˜æ›´æè¿°
æ·»åŠ MACDæŠ€æœ¯æŒ‡æ ‡è®¡ç®—

## æµ‹è¯•
- [x] å•å…ƒæµ‹è¯•
- [x] é›†æˆæµ‹è¯•
- [x] æ‰‹åŠ¨æµ‹è¯•

## æ£€æŸ¥æ¸…å•
- [x] ä»£ç å·²æ ¼å¼åŒ–
- [x] æµ‹è¯•å·²é€šè¿‡
- [x] æ–‡æ¡£å·²æ›´æ–°
- [x] æ— ç ´åæ€§å˜æ›´

## ç›¸å…³Issue
Closes #456
```

---

## ğŸ§ª æµ‹è¯•æŒ‡å—

### å•å…ƒæµ‹è¯•

æµ‹è¯•å•ä¸ªå‡½æ•°/ç±»ï¼š

```python
# tests/unit/test_example.py
import pytest

def test_function():
    result = function(input)
    assert result == expected
```

è¿è¡Œï¼š
```bash
pytest tests/unit/ -v
```

### é›†æˆæµ‹è¯•

æµ‹è¯•å¤šä¸ªæ¨¡å—åä½œï¼š

```python
# tests/integration/test_flow.py
@pytest.mark.integration
def test_complete_flow():
    # æµ‹è¯•å®Œæ•´ä¸šåŠ¡æµç¨‹
    pass
```

è¿è¡Œï¼š
```bash
pytest tests/integration/ -v
```

### æµ‹è¯•è¦†ç›–ç‡

```bash
pytest --cov=app --cov-report=html
open htmlcov/index.html
```

ç›®æ ‡è¦†ç›–ç‡: **>80%**

---

## ğŸ“– æ–‡æ¡£è§„èŒƒ

### ä»£ç æ³¨é‡Š

ä½¿ç”¨Googleé£æ ¼æ–‡æ¡£å­—ç¬¦ä¸²ï¼š

```python
def function(param1: str, param2: int) -> dict:
    """
    å‡½æ•°ç®€è¦æè¿°

    Args:
        param1: å‚æ•°1è¯´æ˜
        param2: å‚æ•°2è¯´æ˜

    Returns:
        è¿”å›å€¼è¯´æ˜

    Raises:
        ValueError: å‚æ•°æ— æ•ˆæ—¶

    Examples:
        >>> function("test", 10)
        {"result": "success"}
    """
    pass
```

### Markdownæ–‡æ¡£

- ä½¿ç”¨æ¸…æ™°çš„æ ‡é¢˜å±‚çº§
- æ·»åŠ ç›®å½•ï¼ˆé•¿æ–‡æ¡£ï¼‰
- ä½¿ç”¨ä»£ç å—æ ‡æ³¨è¯­è¨€
- æ·»åŠ ç¤ºä¾‹

---

## ğŸ¯ ä¼˜å…ˆçº§

æˆ‘ä»¬ç‰¹åˆ«æ¬¢è¿ä»¥ä¸‹è´¡çŒ®ï¼š

1. **Bugä¿®å¤** - æœ€é«˜ä¼˜å…ˆçº§
2. **æµ‹è¯•è¦†ç›–** - æé«˜æµ‹è¯•è¦†ç›–ç‡
3. **æ€§èƒ½ä¼˜åŒ–** - æå‡ç³»ç»Ÿæ€§èƒ½
4. **æ–‡æ¡£æ”¹è¿›** - å®Œå–„æ–‡æ¡£
5. **æ–°åŠŸèƒ½** - æ·»åŠ æœ‰ç”¨çš„åŠŸèƒ½

---

## ğŸ’¬ äº¤æµæ¸ é“

- **GitHub Issues**: æŠ¥å‘ŠBugå’ŒåŠŸèƒ½å»ºè®®
- **GitHub Discussions**: æŠ€æœ¯è®¨è®º
- **Pull Requests**: ä»£ç å®¡æŸ¥

---

## ğŸ† è´¡çŒ®è€…

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…ï¼

æŸ¥çœ‹[è´¡çŒ®è€…åˆ—è¡¨](https://github.com/minionszyw/cn5-lite/graphs/contributors)

---

## ğŸ“œ è¡Œä¸ºå‡†åˆ™

### æˆ‘ä»¬çš„æ‰¿è¯º

ä¸ºäº†è¥é€ å¼€æ”¾å’Œå‹å¥½çš„ç¯å¢ƒï¼Œæˆ‘ä»¬æ‰¿è¯ºï¼š

- å°Šé‡ä¸åŒè§‚ç‚¹å’Œç»éªŒ
- æ¥å—å»ºè®¾æ€§æ‰¹è¯„
- å…³æ³¨ç¤¾åŒºæœ€ä½³åˆ©ç›Š
- å‹å–„å¯¹å¾…å…¶ä»–æˆå‘˜

### ä¸å¯æ¥å—çš„è¡Œä¸º

- ä½¿ç”¨æ€§æš—ç¤ºè¯­è¨€æˆ–å›¾åƒ
- äººèº«æ”»å‡»æˆ–è´¬æŸè¯„è®º
- éªšæ‰°è¡Œä¸º
- å‘å¸ƒä»–äººç§äººä¿¡æ¯

---

## â“ å¸¸è§é—®é¢˜

### Q: æˆ‘æ˜¯æ–°æ‰‹ï¼Œèƒ½è´¡çŒ®å—ï¼Ÿ

**A**: å½“ç„¶ï¼æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰çº§åˆ«çš„è´¡çŒ®è€…ã€‚å¯ä»¥ä»ç®€å•çš„æ–‡æ¡£æ”¹è¿›ã€BugæŠ¥å‘Šå¼€å§‹ã€‚

### Q: å¦‚ä½•é€‰æ‹©è¦åšçš„Issueï¼Ÿ

**A**: æŸ¥æ‰¾æ ‡ç­¾ä¸º`good first issue`æˆ–`help wanted`çš„Issueã€‚

### Q: æˆ‘çš„PRå¤šä¹…ä¼šè¢«å®¡æŸ¥ï¼Ÿ

**A**: é€šå¸¸1-3å¤©å†…ã€‚å¤æ‚PRå¯èƒ½éœ€è¦æ›´é•¿æ—¶é—´ã€‚

### Q: æµ‹è¯•å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**A**: æ£€æŸ¥é”™è¯¯æ—¥å¿—ï¼Œä¿®å¤é—®é¢˜åé‡æ–°æäº¤ã€‚å¯ä»¥åœ¨PRä¸­è¯·æ±‚å¸®åŠ©ã€‚

### Q: å¦‚ä½•ä¿æŒåˆ†æ”¯æ›´æ–°ï¼Ÿ

**A**:
```bash
git remote add upstream https://github.com/minionszyw/cn5-lite.git
git fetch upstream
git rebase upstream/main
```

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [Pythonä»£ç é£æ ¼æŒ‡å—](https://pep8.org/)
- [pytestæ–‡æ¡£](https://docs.pytest.org/)
- [Gitå·¥ä½œæµç¨‹](https://guides.github.com/introduction/flow/)
- [Conventional Commits](https://www.conventionalcommits.org/)

---

**æ„Ÿè°¢æ‚¨çš„è´¡çŒ®ï¼** ğŸ‰

**æœ€åæ›´æ–°**: 2025-11-30
